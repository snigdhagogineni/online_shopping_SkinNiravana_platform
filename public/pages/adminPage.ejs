<!-- adminPage.ejs -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
    />
    <link rel="stylesheet" href="../stylesheets/style.css" />
    <title>Admin Page</title>
    <style>
      .navbar {
        background: linear-gradient(to bottom, #00BC7E, #108775);
        padding-top: 20px;
        padding-bottom: 20px;
        font-size: 24px;
    
      }
      .navbar1{
        margin-bottom: 10px;
      }
    
      .navbar-brand {
        font-size: 45px !important;
      }
    
    
      .navbar-brand,
      .navbar-nav .nav-link {
        font-size: 28px;
      }
      .adminhead1{
        padding-top: 110px;
       
      }
    
    </style>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-dark  bg-dark fixed-top ">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">SkinNiravana</a>
        <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link" href="/logout" style="color: white;">Logout</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="container-fluid">
      <div class="adminhead1">
      <h1>Welcome, Admin!</h1>
      <% if (typeof message !== 'undefined' && message !== null) { %>
      <div class="alert alert-success" role="alert" id="successInfo">
        <%= message %>
      </div>
      <% } %>
      <div class="navbar1 ">
        <div>
          <a href="/items/add" class="btn btn-success">Add New Item</a>
        </div>
        <!-- <div class="logout-link">
          <a href="/logout">Logout</a>
        </div> -->
      </div>
      </div>

      <h2>All Items</h2>
      <!-- <% items.forEach(item => { %>
      <div class="row mt-2">
        <div class="col-md-3"><strong>Name:</strong> <%= item.name %></div>
        <div class="col-md-3">
          <strong>Description:</strong> <%= item.description %>
        </div>
        <div class="col-md-2"><strong>Value:</strong> <%= item.value %></div>
        <div class="col-md-2"><strong>Count:</strong> <%= item.count %></div>
        <div class="col-md-2">
          <a href="/items/<%= item._id %>/edit" class="btn btn-primary"
            >Edit Item</a
          >
          <form
            method="POST"
            action="/items/<%= item._id %>?_method=DELETE"
            style="display: inline"
          >
            <button type="submit" class="btn btn-danger">Delete Item</button>
          </form>
        </div>
      </div>
      <% }); %> -->

      <div class="row">
        <% items.forEach(function(item, index) { %> <% if (index % 4===0) { %>
      </div>
      <div class="row">
        <% } %>
        <div class="col-md-3 mb-4">
          <div class="card h-100">
            <img
              src="<%= item.image %>"
              class="card-img-top"
              alt="<%= item.name %>"
              style="height: 200px; margin-top: 10%; object-fit: contain"
            />
            <div class="card-body">
              <h5 class="card-title"><%= item.name %></h5>
              <p class="card-text"><%= item.description %></p>
              <div class="price-stock mt-2">
                <p class="card-text price">$<%= item.value %></p>
                <p class="card-text stock"><%= item.count %> in stock</p>
              </div>
              <div class="cardbuttons">
                <a href="/items/<%= item._id %>/edit" class="btn btn-primary"
                  >Edit Item</a
                >
                <form
                  method="POST"
                  action="/items/<%= item._id %>?_method=DELETE"
                >
                  <button type="submit" class="btn btn-danger">
                    Delete Item
                  </button>
                </form>
              </div>
            </div>
          </div>
        </div>
        <% }); %>
      </div>
    </div>
  </body>
  <script>
    setTimeout(function () {
      var successInfo = document.getElementById("successInfo");
      if (successInfo) {
        window.location.href = "./admin";
      }
    }, 5000);
  </script>
</html>
